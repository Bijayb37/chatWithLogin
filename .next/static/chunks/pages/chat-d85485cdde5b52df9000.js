(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[180],{1753:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var s=n(5893),o=n(7294),a=n(5085),r=n.n(a);function i(e){var t=e.toastList,n=e.setToastList;(0,o.useEffect)((function(){var e=setInterval((function(){t.length>0&&a(t[0].id)}),3e3);return function(){clearInterval(e)}}),[t]);var a=function(e){n((function(t){return t.filter((function(t){return t.id!==e}))}))};return(0,s.jsx)("div",{className:r().notificationContainer,children:t.length>0&&(0,s.jsx)(s.Fragment,{children:t.map((function(e,t){return(0,s.jsxs)("div",{className:r().notification,style:"red"==e.color?{backgroundColor:"#c0392b"}:{backgroundColor:"#16a085"},onClick:function(){return a(e.id)},children:[(0,s.jsx)("div",{className:r().notificationTitle,children:(0,s.jsx)("p",{children:e.title})}),(0,s.jsx)("div",{className:r().notificationMessage,children:(0,s.jsx)("p",{children:e.message})})]},t)}))})})}},9511:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return x}});var s=n(5893),o=n(6156),a=n(7329),r=n(4699),i=n(7294),c=n(8629),u=n(6793),l=n(464),f=n.n(l),m=n(1163),d=n(9008),h=n(1753);var _=n(6552);function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var x=function(e){var t=(0,i.useContext)(u.J).socket,n=(0,i.useContext)(c.Tr),o=n.username,l=n.setUsername,g=n.room,x=n.setRoom,C=(0,i.useContext)(c.sH),j=C.users,v=C.setUsers,b=(0,i.useState)([]),y=b[0],N=b[1],w=(0,i.useState)(""),M=w[0],O=w[1],T=(0,i.useState)([{title:"Welcome ".concat(o),message:"to room ".concat(g)}]),k=T[0],P=T[1],B=function(e){var t=(0,i.useState)(e),n=t[0],s=t[1];return[n,function(){s((function(e){return!e}))}]}(!1),S=(0,r.Z)(B,2),E=S[0],F=S[1],Z=(0,m.useRouter)();(0,i.useEffect)((function(){return o?(Z.beforePopState((function(){U()})),t.emit("second login"),t.on("toast",(function(e,t){var n=Math.floor(101*Math.random());P((function(s){return[].concat((0,a.Z)(s),[{id:n,title:"".concat(e),message:"has enterted room ".concat(t)}])}))})),t.on("chat message",(function(e){N((function(t){return[].concat((0,a.Z)(t),[p(p({},e),{},{messageByCurrentUser:!1})])}))})),t.on("users",(function(e){v(e)})),t.on("removal",(function(e,t){v(e);var n=Math.floor(101*Math.random());P((function(e){return[].concat((0,a.Z)(e),[{id:n,title:"".concat(t.username),message:"has left the room"}])}))})),function(){return t.disconnect()}):Z.push("/")}),[]);var L=y.map((function(e,t){return(0,s.jsx)("p",{className:"".concat(f().messageItem," ").concat(e.messageByCurrentUser?f().myMessage:f().othersMessage),children:e.body},t)})),U=function(){l(""),x(""),Z.push("/"),Z.reload()};return console.log(y),(0,s.jsxs)("div",{className:f().chatContainer,children:[(0,s.jsx)(d.default,{children:(0,s.jsx)("link",{rel:"stylesheet",href:"https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css"})}),(0,s.jsxs)("div",{className:f().header,children:[(0,s.jsxs)("div",{className:f().dropdown,children:[(0,s.jsxs)("button",{onClick:F,children:["Users \xa0",(0,s.jsx)("i",{className:"bi bi-list ".concat(f().listIcon)})]}),E&&(0,s.jsx)("ul",{className:f().list,children:j.map((function(e,t){return(0,s.jsx)("li",{children:e.username},t)}))})]}),(0,s.jsxs)("div",{onClick:function(){return U()},className:f().nameContainer,children:[(0,s.jsx)("h3",{children:o||"username"}),(0,s.jsx)("p",{children:"Room ".concat(g)||0})]}),(0,s.jsx)("button",{onClick:U,className:f().button,children:"Log Out"})]}),(0,s.jsxs)("div",{className:f().mainBody,children:[(0,s.jsx)(_.ZP,{className:f().messages,children:L}),(0,s.jsx)("div",{className:f().messages2,children:(0,s.jsxs)("form",{className:f().newMessageForm,children:[(0,s.jsx)("textarea",{onChange:function(e){O(e.target.value)},value:M,className:f().newMessageBox,placeholder:"type new message here"}),(0,s.jsx)("button",{onClick:function(e){e.preventDefault(),N((function(e){return[].concat((0,a.Z)(e),[{body:M,id:t.id,messageByCurrentUser:!0}])})),t.emit("chat message",{body:M,id:t.id}),O("")},className:f().messageButton,children:"Submit"})]})})]}),(0,s.jsx)("div",{children:(0,s.jsx)(h.Z,{toastList:k,setToastList:P})})]})}},8752:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/chat",function(){return n(9511)}])},464:function(e){e.exports={chatContainer:"Chat_chatContainer__3P7pQ",header:"Chat_header__6QF_3",dropdown:"Chat_dropdown__11C5F",list:"Chat_list__3RXDT",nameContainer:"Chat_nameContainer__35fAJ",mainBody:"Chat_mainBody__MnFXS",messages:"Chat_messages__1ULSN",messageItem:"Chat_messageItem__1YXLL",myMessage:"Chat_myMessage__1bWpp",othersMessage:"Chat_othersMessage__84AUv",messages2:"Chat_messages2__3Fxa-",messageButton:"Chat_messageButton__APfx-",newMessageBox:"Chat_newMessageBox__US0dy",newMessageForm:"Chat_newMessageForm__2V5K4",listIcon:"Chat_listIcon__34i2Q"}},5085:function(e){e.exports={notificationContainer:"Toast_notificationContainer__2tZxS","toast-in-right":"Toast_toast-in-right__1ELGa",notification:"Toast_notification__3kfxC",notificationTitle:"Toast_notificationTitle__2tAys",notificationMessage:"Toast_notificationMessage__1Rf1w","toast-in-left":"Toast_toast-in-left__1MTFF"}}},function(e){e.O(0,[774,275,888,179],(function(){return t=8752,e(e.s=t);var t}));var t=e.O();_N_E=t}]);